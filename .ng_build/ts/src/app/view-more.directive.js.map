{"version":3,"sources":["view-more.directive.ts"],"names":[],"mappings":"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","file":"view-more.directive.js","sourceRoot":"","sourcesContent":["import { Directive, ElementRef, OnInit, Output, Input, EventEmitter, OnDestroy, AfterViewChecked, SimpleChanges } from '@angular/core';\nimport { ViewMoreService } from './view-more.service';\nexport class ViewMoreDirective implements OnInit, AfterViewChecked, OnDestroy {\nprivate element: HTMLInputElement;\n   viewHeight: number;\n   showMore = new EventEmitter<boolean>()\n  toggleShowMore = false;\n  actualHeight: number;\nprivate isInsertedViewMoreBtn = false;\n  repeatedStructure: NodeListOf<Element>;\n  viewRepeatedCount: number;\n  elementIDValue: any;\n/**\n * @param {?} elRef\n * @param {?} viewMoreService\n */\nconstructor(private elRef: ElementRef,\nprivate viewMoreService: ViewMoreService) {\n    //elRef will get a reference to the element where\n    //the directive is placed\n    this.element = elRef.nativeElement;\n  }\n/**\n * @param {?} changes\n * @return {?}\n */\nngOnChanges(changes: SimpleChanges) {\n    // console.log('changes',changes);\n  }\n/**\n * @return {?}\n */\nngOnInit() {\n    console.log('height equal', this.viewHeight, this.element.offsetHeight);\n    this.repeatedStructure = document.querySelectorAll('[view-more]');\n    if (!!this.repeatedStructure && this.repeatedStructure.length > 0) {\n      this.viewRepeatedCount = this.repeatedStructure.length;\n      this.viewMoreService.classUniqueCount = this.viewRepeatedCount\n      console.log('this.viewRepeatedCount', this.viewRepeatedCount);\n      // this.repeatedStructure.forEach((element, index) => {\n       \n      // })\n      for (let /** @type {?} */ index = 0; index < this.repeatedStructure.length; index++) {\n        this.elementIDValue = this.repeatedStructure[index].getAttribute('id');\n        console.log('this.elementIDValue', this.elementIDValue);\n        if (!this.elementIDValue) {\n          this.repeatedStructure[index].setAttribute(`id`, `${index+1}`);\n        }\n        \n      }\n\n    }\n    console.log('no of elements', document.querySelectorAll('[view-more]'));\n  }\n/**\n * @return {?}\n */\nngAfterViewChecked() {\n    this.actualHeight = this.element.offsetHeight + 10;\n    if (!this.isInsertedViewMoreBtn && (this.element.offsetHeight > this.viewHeight)) {\n      let /** @type {?} */ btnName = 'view More...';\n      console.log('height equal');\n\n      let /** @type {?} */ para = document.createElement(\"p\");\n      let /** @type {?} */ span = document.createElement(\"span\");\n      let /** @type {?} */ textNode = document.createTextNode(`${ btnName }`);\n      span.appendChild(textNode);\n      para.appendChild(span);\n      para.setAttribute(`style`, `text-align: right;`);\n      span.setAttribute(`id`, `text_view_${this.elementIDValue}`);\n      span.setAttribute('style', 'cursor:pointer;')\n      this.element.parentNode.insertBefore(para, this.element.nextSibling)\n      this.toggleEventOnViewMore( document.getElementById(`text_view_${this.elementIDValue}`));\n      this.isInsertedViewMoreBtn = true;\n    }\n  }\n/**\n * @param {?} element\n * @return {?}\n */\ntoggleEventOnViewMore(element: HTMLElement) {\n    this.element.setAttribute(\n      `style`,\n      `overflow: hidden;\n    height: ${this.viewHeight }px;\n    transition: height 1s ease;\n    `\n    );\n    let /** @type {?} */ createdStyleTag: HTMLStyleElement;\n    createdStyleTag = document.createElement(\"style\");\n    createdStyleTag.setAttribute(`id`, `style_view_more`);\n    createdStyleTag.textContent = `.view_more_${this.elementIDValue} {\n      height: ${this.actualHeight }px !important;\n    }  \n`;\n    this.element.style.animationDirection = \"\";\n    // document.body.appendChild(createdStyleTag);\n    this.element.appendChild(createdStyleTag);\n    element.addEventListener('click', () => {\n      console.log('element',element);\n      \n      if (this.toggleShowMore) {\n        console.log('viewless');\n        this.element.classList.remove(`view_more_${this.elementIDValue}`);\n        document.getElementById(`text_view_${this.elementIDValue}`).innerHTML = 'view more...';\n        this.toggleShowMore = !this.toggleShowMore;\n        this.showMore.emit(false);\n      } else {\n        console.log('viewmore');\n        document.getElementById(`text_view_${this.elementIDValue}`).innerHTML = 'view less...';\n        this.element.classList.add(`view_more_${this.elementIDValue}`);\n        this.toggleShowMore = !this.toggleShowMore;\n        this.showMore.emit(true);\n      }\n    })\n  }\n/**\n * @return {?}\n */\nngOnDestroy() {\n    if (document.getElementById('style_view_more')) {\n      document.getElementById('style_view_more').remove();\n    }\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: '[view-more]'\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: ViewMoreService, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'viewHeight': [{ type: Input },],\n'showMore': [{ type: Output },],\n};\n}\n\nfunction ViewMoreDirective_tsickle_Closure_declarations() {\n/** @type {?} */\nViewMoreDirective.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nViewMoreDirective.ctorParameters;\n/** @type {?} */\nViewMoreDirective.propDecorators;\n/** @type {?} */\nViewMoreDirective.prototype.element;\n/** @type {?} */\nViewMoreDirective.prototype.viewHeight;\n/** @type {?} */\nViewMoreDirective.prototype.showMore;\n/** @type {?} */\nViewMoreDirective.prototype.toggleShowMore;\n/** @type {?} */\nViewMoreDirective.prototype.actualHeight;\n/** @type {?} */\nViewMoreDirective.prototype.isInsertedViewMoreBtn;\n/** @type {?} */\nViewMoreDirective.prototype.repeatedStructure;\n/** @type {?} */\nViewMoreDirective.prototype.viewRepeatedCount;\n/** @type {?} */\nViewMoreDirective.prototype.elementIDValue;\n/** @type {?} */\nViewMoreDirective.prototype.elRef;\n/** @type {?} */\nViewMoreDirective.prototype.viewMoreService;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}