{"version":3,"file":"view-more-directive.umd.js","sources":["../ts/src/app/app.module.ts","../ts/src/app/view-more.directive.ts","../ts/src/app/app.component.ts"],"sourcesContent":["// import { BrowserModule } from '@angular/platform-browser';\n\nimport { NgModule } from '@angular/core';\n\n\nimport { AppComponent } from './app.component';\nimport { ViewMoreDirective } from './view-more.directive';\nexport class AppModule { static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  declarations: [\n    AppComponent,\n    ViewMoreDirective\n  ],\n  imports: [\n    // BrowserModule\n  ],\n  exports:[ViewMoreDirective],\n  providers: [],\n  bootstrap: [AppComponent]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction AppModule_tsickle_Closure_declarations() {\n/** @type {?} */\nAppModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nAppModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { Directive, ElementRef, OnInit, Output, Input, EventEmitter, OnDestroy, AfterViewChecked, SimpleChanges } from '@angular/core';\nexport class ViewMoreDirective implements OnInit, AfterViewChecked, OnDestroy {\nprivate element: HTMLInputElement;\n   viewHeight: number;\n   showMore = new EventEmitter<boolean>()\n  toggleShowMore = false;\n  actualHeight: number;\nprivate isInsertedViewMoreBtn = false;\n/**\n * @param {?} elRef\n */\nconstructor(private elRef: ElementRef) {\n    //elRef will get a reference to the element where\n    //the directive is placed\n    this.element = elRef.nativeElement;\n  }\n/**\n * @param {?} changes\n * @return {?}\n */\nngOnChanges(changes: SimpleChanges) {\n    // console.log('changes',changes);\n  }\n/**\n * @return {?}\n */\nngOnInit() {\n    console.log('height equal', this.viewHeight, this.element.offsetHeight);\n  }\n/**\n * @return {?}\n */\nngAfterViewChecked() {\n    this.actualHeight = this.element.offsetHeight + 10;\n    if (!this.isInsertedViewMoreBtn && (this.element.offsetHeight > this.viewHeight)) {\n      let /** @type {?} */ btnName = 'view More...';\n      console.log('height equal');\n\n      let /** @type {?} */ para = document.createElement(\"p\");\n      let /** @type {?} */ span = document.createElement(\"span\");\n      let /** @type {?} */ textNode = document.createTextNode(`${ btnName }`);\n      span.appendChild(textNode);\n      para.appendChild(span);\n      para.setAttribute(`style`, `text-align: right;`);\n      span.setAttribute(`id`, `text_view`);\n      span.setAttribute('style', 'cursor:pointer;')\n      this.element.parentNode.insertBefore(para, this.element.nextSibling)\n      this.toggleEventOnViewMore(span);\n      this.isInsertedViewMoreBtn = true;\n    }\n  }\n/**\n * @param {?} element\n * @return {?}\n */\ntoggleEventOnViewMore(element: HTMLElement) {\n    this.element.setAttribute(\n      `style`,\n      `overflow: hidden;\n    height: ${this.viewHeight }px;\n    transition: height 1s ease;\n    `\n    );\n    let /** @type {?} */ createdStyleTag: HTMLStyleElement;\n    createdStyleTag = document.createElement(\"style\");\n    createdStyleTag.setAttribute(`id`, `style_view_more`);\n    createdStyleTag.textContent = `.view_more {\n      height: ${this.actualHeight }px !important;\n    }  \n`;\n    this.element.style.animationDirection = \"\";\n    // document.body.appendChild(createdStyleTag);\n    this.element.appendChild(createdStyleTag);\n    element.addEventListener('click', () => {\n\n      if (this.toggleShowMore) {\n        console.log('viewless');\n        this.element.classList.remove(\"view_more\");\n        document.getElementById('text_view').innerHTML = 'view more...';\n        this.toggleShowMore = !this.toggleShowMore;\n        this.showMore.emit(false);\n      } else {\n        console.log('viewmore');\n        document.getElementById('text_view').innerHTML = 'view less...';\n        this.element.classList.add(\"view_more\");\n        this.toggleShowMore = !this.toggleShowMore;\n        this.showMore.emit(true);\n      }\n    })\n  }\n/**\n * @return {?}\n */\nngOnDestroy() {\n    document.getElementById('style_view_more').remove();\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: '[view-more]'\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'viewHeight': [{ type: Input },],\n'showMore': [{ type: Output },],\n};\n}\n\nfunction ViewMoreDirective_tsickle_Closure_declarations() {\n/** @type {?} */\nViewMoreDirective.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nViewMoreDirective.ctorParameters;\n/** @type {?} */\nViewMoreDirective.propDecorators;\n/** @type {?} */\nViewMoreDirective.prototype.element;\n/** @type {?} */\nViewMoreDirective.prototype.viewHeight;\n/** @type {?} */\nViewMoreDirective.prototype.showMore;\n/** @type {?} */\nViewMoreDirective.prototype.toggleShowMore;\n/** @type {?} */\nViewMoreDirective.prototype.actualHeight;\n/** @type {?} */\nViewMoreDirective.prototype.isInsertedViewMoreBtn;\n/** @type {?} */\nViewMoreDirective.prototype.elRef;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { Component } from '@angular/core';\nexport class AppComponent {\n  title = 'app';\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'app-root',\n  template: `\n    <!--The content below is only a placeholder and can be replaced.-->\n    <div style=\"text-align:center\">\n      <h1>\n        Welcome to {{ title }}!\n      </h1>\n      <img width=\"300\" alt=\"Angular Logo\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg==\">\n    </div>\n    <h2>Here are some links to help you start: </h2>\n    <ul>\n      <li>\n        <h2><a target=\"_blank\" rel=\"noopener\" href=\"https://angular.io/tutorial\">Tour of Heroes</a></h2>\n      </li>\n      <li>\n        <h2><a target=\"_blank\" rel=\"noopener\" href=\"https://github.com/angular/angular-cli/wiki\">CLI Documentation</a></h2>\n      </li>\n      <li>\n        <h2><a target=\"_blank\" rel=\"noopener\" href=\"https://blog.angular.io/\">Angular blog</a></h2>\n      </li>\n    </ul>\n  `,\n  styles: [`\n\n  `]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction AppComponent_tsickle_Closure_declarations() {\n/** @type {?} */\nAppComponent.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nAppComponent.ctorParameters;\n/** @type {?} */\nAppComponent.prototype.title;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["NgModule","Output","Input","ElementRef","Directive","EventEmitter","Component"],"mappings":"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"}